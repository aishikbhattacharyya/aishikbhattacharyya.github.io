<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <style>
    body {
      padding: 100px;
      width: 1000px;
      margin: auto;
      text-align: left;
      font-weight: 300;
      font-family: 'Open Sans', sans-serif;
      color: #121212;
    }
    h1, h2, h3, h4 {
      font-family: 'Source Sans Pro', sans-serif;
    }
  </style>
  <title>CS 180 Project 4</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>

<body>

<h1 align="center">CS 180: Intro to Computer Vision and Computational Photography, Fall 2024</h1>
<h1 align="center">Project 4AB: Image Warping and Mosaicing</h1>
<h2 align="center">Aishik Bhattacharyya</h2>

<div>

<h2 align="center">Overview</h2>
	
<p>
In this project, we focus on shooting our own images and finding correspondences between them to achieve several tasks. First, we warp images and calculate their rectification, which allows us to see images as if they were positioned directly in front of us, rather than at an angle. Second, we use this information to blend images together and form panoramic views.
</p>

<h3 align="center">Shoot the Pictures & Recovering Homographies</h3>
<p>Here are some pictures from the rooftop of an apartment.</p>

<p>
A homography is a 3x3 matrix that represents a transformation between a pair of images. We can recover a homography by using pairs of corresponding points. The points on the pictures below represent these correspondences. To implement this function, I iterated through each pair of points, creating a system of equations to obtain the homography matrix’s coefficients (9 values). I then solved this with a least squares solver and reshaped it into a 3x3 matrix.
</p>

<div align="center">
  <table style="width:100%">
    <tr>
      <td>
        <img src="proj4_images/part1im.PNG" width="400px" alt="Rooftop"/>
        <figcaption>Rooftop</figcaption>
      </td>
    </tr>
  </table>
</div>

<div align="center">
  <table style="width:100%">
    <tr>
      <td>
        <img src="proj4_images/trees.PNG" width="400px" alt="Forest"/>
        <figcaption>Forest</figcaption>
      </td>
      <td>
        <img src="proj4_images/bushes.PNG" width="400px" alt="Bush and Water"/>
        <figcaption>Bush and Water</figcaption>
      </td>
    </tr>
  </table>
</div>

<h3 align="center">Warp the Images & Image Rectification</h3>
<p>
For this step, we use a function that takes in an image and a homography matrix. I defined the image’s corners in the same order I took the points for image rectification. I then warped those corners with the input homography matrix and calculated a bounding box for the resulting image. Next, I applied the inverse homography matrix to all values within the bounding box and ran interpolation with griddata to obtain the final result. To obtain images for rectification, I used images with rectangles and set destination coordinates to arbitrary values mentioned in the image captions below. Since my images were of very high resolution and the code couldn’t process them, I resized them, resulting in some blurriness, as reflected in the rectified images.
</p>

<div align="center">
  <table style="width:100%">
    <tr>
      <td>
        <img src="proj4_images/original1.png" width="400px" alt="Original Painting"/>
        <figcaption>Original Painting</figcaption>
      </td>
      <td>
        <img src="proj4_images/rectified1.png" width="400px" alt="Rectified Painting"/>
        <figcaption>Rectified Painting</figcaption>
      </td>
    </tr>
  </table>
</div>

<div align="center">
  <table style="width:100%">
    <tr>
      <td>
        <img src="proj4_images/ipad3.jpg" width="400px" alt="Original iPad"/>
        <figcaption>Original iPad</figcaption>
      </td>
      <td>
        <img src="proj4_images/rectified2.png" width="400px" alt="Rectified iPad"/>
        <figcaption>Rectified iPad</figcaption>
      </td>
    </tr>
  </table>
</div>

<h3 align="center">Blending Images</h3>
<p>
To blend images, I referenced code from Project 2, especially for blending with Laplacian pyramids. The key difference in this project is computing a mask that allows both images to blend seamlessly. Previously, a half-white, half-black mask was used to blend half of an apple and half of an orange. Here, we calculate a distance map to define the blend impact across different parts of the image. Additionally, I created a canvas to hold both images, ensuring a true merge rather than an overlap.
</p>

<div align="center">
  <table style="width:100%">
    <tr>
      <td>
        <img src="proj4_images/result1.png" width="400px" alt="Result 1"/>
        <figcaption>Result 1</figcaption>
      </td>
      <td>
        <img src="proj4_images/result2.png" width="400px" alt="Result 2"/>
        <figcaption>Result 2</figcaption>
      </td>
      <td>
        <img src="proj4_images/result3.png" width="400px" alt="Result 3"/>
        <figcaption>Result 34</figcaption>
      </td>
    </tr>
  </table>
</div>

</div>
</body>
</html>
