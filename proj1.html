<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<style>
  body {
    padding: 100px;
    width: 1000px;
    margin: auto;
    text-align: left;
    font-weight: 300;
    font-family: 'Open Sans', sans-serif;
    color: #121212;
  }
  h1, h2, h3, h4 {
    font-family: 'Source Sans Pro', sans-serif;
  }
</style>
<title>CS 180 Project 1</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link href="https://fonts.googleapis.com/css?family=Open+Sans|Source+Sans+Pro" rel="stylesheet">
</head>


<body>

<h1 align="middle">CS 180: Intro to Computer Vision and Computational Photography, Fall 2024</h1>
<h1 align="middle">Project 1: Colorizing the Prokudin-Gorskii Photo Collection</h1>
<h2 align="middle">Aishik Bhattacharyya</h2>

<br><br>

<div>

<h2 align="middle">Overview</h2>
	
Sergei Mikhailovich Prokudin-Gorskii, as early as 1907, had a visionary idea--to take three exposures of every scene onto a glass plate with a red, blue, and green filter. He traveled the world and took color photographs everywhere, including the only color portrait of Leo Tolstoy. To honor his commitment, the goal of this project is to take these digitized glass plate images and form a single RGB color image.
<h2 align="middle">Section I: Rasterization</h2>

<h3 align="middle">Exhaustive Search Approach (Simple)</h3>

To solve this issue, I exhaustively searched over a 15 by 15 pixel window using the L2 norm as my scoring metric. For the red and green channels, we look at 125 total possibilities each, shift the channel, and compare it to the blue channel with the aforementioned scoring metric.

This process should work in theory if an image is perfect, but that’s not how it was. I implemented this and kept getting blurry images because there were potential border artifacts such as dust or scanning issues. To solve this, I cropped the image’s borders by 15%.

<div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="proj1_images/out_cathedral.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Cathedral</figcaption>
	</td>
      <td>
	<img src="proj1_images/out_monastery.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Monastery</figcaption>
	</td>
	<td>
	<img src="proj1_images/out_tobolsk.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Tobolsk</figcaption>
	</td>
    </tr>
  </table>
</div>


<h3 align="middle">Image Pyramid Approach (Advanced)</h3>

The simple exhaustive approach has its limitations if the pixel displacement becomes too large. To solve this issue, I implemented an image pyramid, which represents an image at smaller scales and updates estimates as I go. This is particularly effective because we can find an estimate for alignment at a smaller image, where the shifts are also possibly smaller. This is then applied to larger images in a coarse-to-fine strategy. At the end, there are less shifts that need to be considered in the larger images. To implement this, I used my code from the simple approach--this will be referred to as the align function moving forward.

The user can pick how many levels it wants to iterate down recursively and the base case is when there are no more levels left to recur through, in which case we just call the basic align function. We take our two images and scale them down by half and call align on them. We rescale the resulting shift back and shift our original image by this. Then, we align this modified image once again to get our final shift at the current pyramid level. We continue this process until the base case.

  <div align="middle">
  <table style="width=100%">
    <tr>
      <td>
        <img src="church.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Church</figcaption>
      </td>
      <td>
        <img src="emir.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Emir</figcaption>
      </td>
	    <td>
        <img src="harvesters.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Harvesters</figcaption>
	    </td>
    </tr>
    <br>
    <tr>
      <td>
        <img src="icon.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Icon</figcaption>
      </td>
      <td>
        <img src="lady.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Lady</figcaption>
      </td>
	    <td>
        <img src="melons.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Melons</figcaption>
	    </td>
    </tr>
    <br>
    <tr>
      <td>
        <img src="onion_church.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Onion Church</figcaption>
      </td>
      <td>
        <img src="sculpture.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Sculpture</figcaption>
      </td>
	    <td>
        <img src="self_portrait.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Self Portrait</figcaption>
	    </td>
    </tr>
    <br>
    <tr>
      <td>
        <img src="three_generations.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Three Generations</figcaption>
      </td>
      <td>
        <img src="train.jpg" align="middle" width="400px"/>
        <figcaption align="middle">Train</figcaption>
      </td>
    </tr>
  </table>
</div>
</body>
</html>
